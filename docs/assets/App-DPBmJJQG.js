import{j as o,T as g,s as y,r as a}from"./index-C7JdVwin.js";import{n as j,m as w,o as v,p as M}from"./HamburgerMenu-CkIyDhNY.js";import{P as I,L as C,E as b,A as P,a as k,T as B,S as E}from"./AddCameraTarget-BuqFiT2n.js";import{P as T,N as S}from"./PoiHandler-CmnMtBv9.js";import{b as A}from"./BackButton-D8Fxd_vN.js";const _=({fullScreen:e,setFullScreen:t})=>o.jsx(A,{onClick:()=>t(!e),sx:{position:"absolute",bottom:0,left:"30%",width:"40%",height:"6%",opacity:.2,"&:hover":{opacity:.5,fontWeight:"bold"},pointerEvents:"auto",textAlign:"center"},children:o.jsx(g,{variant:"button",color:"black",children:e?"Exit Fullscreen":"Enter Fullscreen"})}),n={sceneTitle:"Nammo demo",description:"A demo Three.js scene for showcasing a digital ammunition catalogue.",containerSettings:{image:"/images/NAMMO-04.png",type:"none",bgStyles:{backgroundRepeat:"no-repeat",backgroundSize:"100% 100%"},fsStyles:{position:"fixed",top:"0",left:"0",width:"100%",height:"100%",backgroundColor:"rgba(128, 128, 128, 0.5)",backdropFilter:"blur(10px)"},styles:{position:"absolute",top:"10.5%",left:"17.4%",width:"36.8%",height:"83.8%"},useFullscreenButton:!0},canvasSettings:{alpha:!0,cameraSettings:{fov:40,near:.01,far:10,position:{x:0,y:0,z:.12}},usePostEffects:!0,environmentProps:{preset:"studio",background:!1},lights:[{isShowcaseLighting:!0,preset:"showcaseWarm"}]},parentPoi:{name:"Ammunition showcaser",description:"Placeholder ammunition POI.",type:"productViewer",cameraControls:{type:"fixed",startPosition:{x:0,y:0,z:.12}},childPois:[{name:"Ammunition 1",type:"product",modelData:[{path:"/models/bulletCrossSection.glb",format:"glb",materialSettings:{materialType:"physical",colorMap:"/textures/556_baseColor.png",normalMap:"/textures/556_normal.png",metalnessMap:"/textures/556_orm.png",roughnessMap:"/textures/556_orm.png",aoMap:"/textures/556_orm.png"},xView:{enabled:!0,standardMesh:[{nodeId:"Casing",materialId:"Bullet"}],xViewMesh:[{nodeId:"CasingHalf1",materialId:"Bullet"},{nodeId:"Bullet",materialId:"Bullet"},{nodeId:"Gunpowder",materialId:"Gunpowder"}],fadeMesh:[{nodeId:"CasingHalf2",materialId:"Bullet"}]}}]},{name:"Ammunition 2",type:"product",modelData:[{path:"/models/bulletCrossSection.glb",format:"glb",materialSettings:{materialType:"physical",colorMap:"/textures/556_baseColor.png",normalMap:"/textures/556_normal.png",metalnessMap:"/textures/556_orm.png",roughnessMap:"/textures/556_orm.png",aoMap:"/textures/556_orm.png"},xView:{enabled:!0,standardMesh:[{nodeId:"Casing",materialId:"Bullet"}],xViewMesh:[{nodeId:"CasingHalf1",materialId:"Bullet"},{nodeId:"Bullet",materialId:"Bullet"},{nodeId:"Gunpowder",materialId:"Gunpowder"}],fadeMesh:[{nodeId:"CasingHalf2",materialId:"Bullet"}]}}]}]},debugSettings:{gridHelper:!1,axesHelper:!1,stats:!1,lightHelpers:!1}},F=({containerSettings:e,fullScreen:t,children:s})=>{const r=H(e),l=c((e==null?void 0:e.styles)||{position:"relative",width:"100%",height:"100%"}),i=c((e==null?void 0:e.fsStyles)||{position:"fixed",top:0,left:0,zIndex:0});return o.jsx("div",{id:"background",style:r,children:o.jsx("div",{id:"canvas-container",style:t?i:l,children:s})})},c=e=>{const t={};return Object.assign(t,e),t};function H(e){let t={};switch(e!=null&&e.bgStyles&&(t=c(e.bgStyles)),t.width="100%",t.height="100%",e==null?void 0:e.type){case"contain":t.backgroundSize="contain";break;case"auto":t.backgroundSize="auto";break;case"cover":t.backgroundSize="cover";break;default:case"none":break}return e!=null&&e.image?t.backgroundImage=`url(${y}${e.image})`:e!=null&&e.color&&(t.backgroundColor=e.color),console.log(t),t}const D=()=>{var m;const e=a.useRef(null),t=a.useRef(null),s=a.useRef(null),[r,l]=a.useState(!1),i=()=>{l(u=>!u)},[d,h]=a.useState(!1),f=()=>{h(u=>!u)},[p,x]=a.useState(!1);return o.jsx(F,{containerSettings:n.containerSettings,fullScreen:p,children:o.jsxs(I,{initialPoi:n.parentPoi,children:[o.jsx(j,{ref:e,camera:{position:new w(0,8,12),near:.05,far:5},gl:{powerPreference:"high-performance",alpha:!0,antialias:!0},shadows:!d,children:o.jsxs(a.Suspense,{fallback:o.jsx(C,{}),children:[o.jsx(b,{preset:"studio"}),o.jsx(R,{}),r&&o.jsx(v,{}),!d&&o.jsx(z,{}),o.jsx(P,{}),o.jsx(T,{projectData:n,canvasRef:e,uiRef:s,overlayRef:t})]})}),o.jsx("div",{id:"overlay",ref:t,style:{position:"absolute",left:0,top:0,height:"100%",width:"100%",pointerEvents:"none",overflow:"hidden"}}),o.jsxs("div",{ref:s,id:"ui-overlay",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",pointerEvents:"none",overflow:"hidden"},children:[o.jsx(M,{showStats:r,onToggleStats:i,usePerformanceMode:d,onTogglePerformanceMode:f}),((m=n.containerSettings)==null?void 0:m.useFullscreenButton)&&o.jsx(_,{fullScreen:p,setFullScreen:x})]})]})})};function R(){return o.jsxs("group",{children:[o.jsx("directionalLight",{position:[5,5,-10],intensity:40}),o.jsx("directionalLight",{position:[-5,5,5],intensity:.4}),o.jsx("directionalLight",{position:[-5,5,-5],intensity:.4}),o.jsx("directionalLight",{position:[0,5,0],intensity:.4})]})}const z=()=>o.jsxs(o.Fragment,{children:[o.jsxs(k,{children:[o.jsx(B,{}),o.jsx(S,{aoRadius:1,distanceFalloff:1,intensity:.6})]}),o.jsx(E,{size:4,focus:.4,samples:32})]});export{D as default};
